---
title: Base编码家族
categories: Develop
tags: Hacking
header: 
    overlay_image: ../images/Screenshot_20171013_092202.png
    overlay_filter: 0.5
---
深入了解BASE编码家族，原理，以及应用：BASE64编码为例子

## 啥？
BASE64：用64个可打印字符对二进制进行编码的方法。这64个可打印字符包括[a-z A-z 0-9]，+，/，一共64个字符，
=用来作为后缀。

## 举个例子...

我们把MAN这单词转化为BASE64编码

|字符串|M|A|N|
|------|-|-|-|
|ASCII码|77|97|110|
|二进制位|0 	1 	0 	0 	1 	1 	0 	1| 	0 	1 	1 	0 	0 	0 	0 	1| 	0 	1 	1 	0 	1 	1 	1 	0|
|六分二进制位|0 	1 	0 	0 	1 	1| 	0 	1 	0 	1 	1 	0| 	0 	0 	0 	1 	0 	1| 	1 	0 	1 	1 	1 	0|
|索引 	|19 	|22 	|5 	|46|
|Base64编码| 	T| 	W| 	F| 	u|

## 编码过程

让我们来看看整个编码过程是怎么样子的。

首先，将MAN转化为ASCII对应编码：
* M ---> 77
* A ---> 97
* N ---> 110

每个ASCII编码对应8个二进制位：
* 77 ---> 0   1   0   0   1   1   0   1
* 97 ---> 0   1   1   0   0   0   0   1
* 110 ---> 0   1   1   0   1   1   1   0

也就是 01001101 01000001 01001110 00001010

这一串数据，没6位分一组：

|010011|010110|000101|101110|

第一组二进制换算为10进制为19,第二组为22，第三组为5，第四组为46。得到了64个可打印字符的索引。

在BASE64编码中
```
ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/
```

T在第19位，W在22位，F在第五位，u在第46位，所以MAN经过BASE64编码后为**TWFu**，编码后的数据比原始数据略长。

## 细节

RFC 822规定，每76个字符，还需要加上一个回车换行`\n`

转换的时候，将三个字节的数据，先后放入一个24位的缓冲区中，先来的高为直接还是占高位，如果数据不足3字节，那么剩下的位由0补齐。

如A，不足3字节，则base64编码中二进制位为

```
00001010 00000000 00000000
```

然后，每次取出6位，算出其代表10进制数，然后根据索引打印对应字符。

当原数据长度不是3字节的整数倍时, 如果最後剩下一個数据，转换后加俩个==，如果剩下俩个数据，那就加一个=

如A后缺少俩个数据，BASE64编码为：QQ==


